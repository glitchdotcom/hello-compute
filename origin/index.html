<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Agenda de Turnos</title>
  <style>
    body { font-family: Arial; margin: 30px; background-color: #f4f4f4; }
    h1 { color: #333; }
    .turno { background: white; padding: 15px; border-radius: 8px; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .lleno { background-color: #ffd6d6; }
    label, input { display: block; margin-bottom: 8px; }
    input[type="submit"] { margin-top: 10px; padding: 5px 10px; }
  </style>
</head>
<body>

  <h1>Agenda de Turnos</h1>

  <div id="turnos"></div>

  <script>
    // Aquí defines tus horarios disponibles
    const horariosDisponibles = [
      "08:00 - 08:30",
      "08:30 - 09:00",
      "09:00 - 09:30",
      "10:00 - 10:30",
      "10:30 - 11:00"
    ];

    // Guardamos los anotados en memoria local (se borra al cerrar el navegador)
    const turnos = JSON.parse(sessionStorage.getItem("turnos")) || {};

    function guardarTurnos() {
      sessionStorage.setItem("turnos", JSON.stringify(turnos));
    }

    const contenedor = document.getElementById("turnos");

    horariosDisponibles.forEach(horario => {
      const div = document.createElement("div");
      div.className = "turno";
      const anotados = turnos[horario] || [];
      if (anotados.length >= 3) div.classList.add("lleno");

      div.innerHTML = `
        <h3>${horario} ${anotados.length >= 3 ? "(Lleno)" : ""}</h3>
        <p><strong>Anotados (${anotados.length}/3):</strong></p>
        <ul>${anotados.map(p => `<li>${p.nombre} (${p.celular})</li>`).join("")}</ul>
        ${anotados.length < 3 ? `
          <form onsubmit="anotar(event, '${horario}')">
            <label>Nombre:</label>
            <input type="text" name="nombre" required>
            <label>Apellido:</label>
            <input type="text" name="apellido" required>
            <label>Celular:</label>
            <input type="tel" name="celular" required>
            <input type="submit" value="Anotarse">
          </form>
        ` : "<p>Este turno está lleno.</p>"}
      `;
      contenedor.appendChild(div);
    });

    function anotar(event, horario) {
      event.preventDefault();
      const form = event.target;
      const nombre = form.nombre.value.trim();
      const apellido = form.apellido.value.trim();
      const celular = form.celular.value.trim();
      if (!turnos[horario]) turnos[horario] = [];
      turnos[horario].push({ nombre: nombre + " " + apellido, celular });
      guardarTurnos();
      location.reload();
    }
  </script>

</body>
</html>
